(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{636:function(e,t,r){"use strict";r.r(t);var n=r(187),l=r(546),c=r(375),o=r(645),m=r(559),d=r(564),f=r(622),h=r(624),v=r(623),j=r(621),O=r(87),k=r(620),E=(r(9),r(8),r(11),r(12),r(1)),w=r(6),y=(r(44),r(20),r(63),r(64),r(7),r(37),r(42));function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(E.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var C={name:"Email",layout:"admin",data:function(){return{saving:!1,usersToEmail:[],usersForEmail:[],allChecked:!0,subject:"",email:""}},fetch:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.listAllUsers();case 2:e.mapUsers(),e.usersForEmail=e.users;case 4:case"end":return t.stop()}}),t)})))()},computed:x({},Object(y.c)("admin",["users"])),methods:x(x(x({},Object(y.b)("admin",["listAllUsers"])),Object(y.b)("snackbar",["snack"])),{},{all:function(){this.allChecked?this.mapUsers():this.usersToEmail=[]},mapUsers:function(){this.usersToEmail=this.users.map((function(e){return e.id}))},sendEmail:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.saving=!0,t.next=3,e.$sendEmail(e.usersToEmail.reduce((function(t,r){return t.push(e.usersForEmail.filter((function(e){return e.id===r}))[0].email),t}),[]).toString(),e.subject,e.email);case 3:200===t.sent.status&&(e.snack({message:"Your message was successfully sent to "+e.usersToEmail.length+" users."}),e.subject=null,e.email=null,e.saving=!1);case 5:case"end":return t.stop()}}),t)})))()}})},P=r(51),component=Object(P.a)(C,(function(){var e=this,t=e._self._c;return t(d.a,[t(l.a,[t(c.b,[t("h3",[e._v("Email")])]),e._v(" "),t(c.a,[t(O.a,{attrs:{placeholder:"Subject",outlined:"",label:"Subject"},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}}),e._v(" "),t(k.a,{attrs:{cols:"12",md:"6",placeholder:"Email",outlined:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),e._v(" "),t(j.a,{attrs:{accordion:""}},[t(f.a,[t(v.a,[e._v("\n        Users ("+e._s(e.usersToEmail.length)+")\n      ")]),e._v(" "),t(h.a,[t(o.a,{attrs:{label:"Check/Uncheck All"},on:{click:e.all},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}}),e._v(" "),t(d.a,{staticClass:"d-flex justify-center flex-wrap"},e._l(e.usersForEmail,(function(r){return t(m.a,{key:r.id,staticClass:"lg-3 xs-12"},[t(o.a,{attrs:{id:r.id,label:"".concat(r.firstName," ").concat(r.lastName),value:r.id},model:{value:e.usersToEmail,callback:function(t){e.usersToEmail=t},expression:"usersToEmail"}})],1)})),1)],1)],1)],1),e._v(" "),t(m.a,{staticClass:"text-right",attrs:{cols:"12"}},[t("NuxtLink",{staticClass:"mr-2",attrs:{to:"/forgotPassword"}},[e._v("Cancel")]),e._v(" "),t(n.a,{attrs:{color:"primary",disabled:e.saving,small:""},on:{click:e.sendEmail}},[e._v("Send")])],1)],1)}),[],!1,null,"96342764",null);t.default=component.exports}}]);